{% extends "core/base.html" %}
{% load static %}

{% block title %}Create a New Test Wizard{% endblock %}

{% block extra_css %}
    {# Link to the new stylesheet we will create #}
    <link rel="stylesheet" href="{% static 'core/css/add_test.css' %}">
{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="wizard-container">
        <!-- The entire form wraps all steps -->
        <form id="createTestForm" method="POST" enctype="multipart/form-data" novalidate>
            {% csrf_token %}

            <h2 class="text-center">Test Creation Wizard</h2>
            <p class="text-center text-muted">Follow the steps to create your new assessment.</p>

            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-step progress-step-active" data-title="Details"></div>
                <div class="progress-step" data-title="Configuration"></div>
                <div class="progress-step" data-title="Finalize"></div>
            </div>

            <!-- Step 1: Core Details -->
            <div class="form-step form-step-active">
                <h3 class="step-title">Step 1: Core Details</h3>
                <div class="mb-3">
                    <label for="{{ form.title.id_for_label }}" class="form-label">Test Title</label>
                    {{ form.title }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.category.id_for_label }}" class="form-label">Category</label>
                    {{ form.category }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.description.id_for_label }}" class="form-label">Description</label>
                    {{ form.description }}
                </div>
                <div class="btns-group">
                    <a href="#" class="btn btn-next">Next →</a>
                </div>
            </div>

            <!-- Step 2: Configuration -->
            <div class="form-step">
                <h3 class="step-title">Step 2: Configuration</h3>
                <div class="mb-3">
                    <label for="{{ form.difficulty.id_for_label }}" class="form-label">Difficulty Level</label>
                    {{ form.difficulty }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.duration_in_minutes.id_for_label }}" class="form-label">Duration (in minutes)</label>
                    {{ form.duration_in_minutes }}
                </div>
                <div class="btns-group">
                    <a href="#" class="btn btn-prev">← Previous</a>
                    <a href="#" class="btn btn-next">Next →</a>
                </div>
            </div>

            <!-- Step 3: Image & Submission -->
            <div class="form-step">
                <h3 class="step-title">Step 3: Upload & Finalize</h3>
                <div class="mb-3">
                    <label for="{{ form.image.id_for_label }}" class="form-label">Test Image (Optional)</label>
                    <p class="small text-muted">Upload an image that will appear on the test card.</p>
                    {{ form.image }}
                </div>
                <div class="btns-group">
                    <a href="#" class="btn btn-prev">← Previous</a>
                    <button type="submit" class="btn">Create Test</button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
    {# Link to the new JavaScript file we will create #}
    <script src="{% static 'core/js/add_test.js' %}"></script>
{% endblock %}